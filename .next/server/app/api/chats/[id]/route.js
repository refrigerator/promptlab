"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chats/[id]/route";
exports.ids = ["app/api/chats/[id]/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchats%2F%5Bid%5D%2Froute&page=%2Fapi%2Fchats%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchats%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchats%2F%5Bid%5D%2Froute&page=%2Fapi%2Fchats%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchats%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_taimur_workspace_promptlab_app_api_chats_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chats/[id]/route.ts */ \"(rsc)/./app/api/chats/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chats/[id]/route\",\n        pathname: \"/api/chats/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/chats/[id]/route\"\n    },\n    resolvedPagePath: \"/Users/taimur/workspace/promptlab/app/api/chats/[id]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_taimur_workspace_promptlab_app_api_chats_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chats/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0cyUyRiU1QmlkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0cyUyRiU1QmlkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdHMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRhaW11ciUyRndvcmtzcGFjZSUyRnByb21wdGxhYiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ0YWltdXIlMkZ3b3Jrc3BhY2UlMkZwcm9tcHRsYWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDYTtBQUMxRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb21wdGxhYi8/YzM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdGFpbXVyL3dvcmtzcGFjZS9wcm9tcHRsYWIvYXBwL2FwaS9jaGF0cy9baWRdL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0cy9baWRdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdHMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdHMvW2lkXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy90YWltdXIvd29ya3NwYWNlL3Byb21wdGxhYi9hcHAvYXBpL2NoYXRzL1tpZF0vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdHMvW2lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchats%2F%5Bid%5D%2Froute&page=%2Fapi%2Fchats%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchats%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chats/[id]/route.ts":
/*!*************************************!*\
  !*** ./app/api/chats/[id]/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db-service */ \"(rsc)/./lib/db-service.ts\");\n\n\nasync function GET(request, { params }) {\n    try {\n        const chatId = parseInt(params.id);\n        if (isNaN(chatId)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid chat ID\"\n            }, {\n                status: 400\n            });\n        }\n        const chat = (0,_lib_db_service__WEBPACK_IMPORTED_MODULE_1__.getChatWithMessages)(chatId);\n        if (!chat) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Chat not found\"\n            }, {\n                status: 404\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(chat);\n    } catch (error) {\n        console.error(\"Error fetching chat:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXRzL1tpZF0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdEO0FBQ0Q7QUFFaEQsZUFBZUUsSUFDcEJDLE9BQW9CLEVBQ3BCLEVBQUVDLE1BQU0sRUFBOEI7SUFFdEMsSUFBSTtRQUNGLE1BQU1DLFNBQVNDLFNBQVNGLE9BQU9HLEVBQUU7UUFFakMsSUFBSUMsTUFBTUgsU0FBUztZQUNqQixPQUFPTCxrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFrQixHQUMzQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsT0FBT1gsb0VBQW1CQSxDQUFDSTtRQUVqQyxJQUFJLENBQUNPLE1BQU07WUFDVCxPQUFPWixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFpQixHQUMxQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1gsa0ZBQVlBLENBQUNTLElBQUksQ0FBQ0c7SUFDM0IsRUFBRSxPQUFPRixPQUFPO1FBQ2RHLFFBQVFILEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU9WLGtGQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQUVDLE9BQU9BLGlCQUFpQkksUUFBUUosTUFBTUssT0FBTyxHQUFHO1FBQWdCLEdBQ2xFO1lBQUVKLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvbXB0bGFiLy4vYXBwL2FwaS9jaGF0cy9baWRdL3JvdXRlLnRzP2NkMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldENoYXRXaXRoTWVzc2FnZXMgfSBmcm9tICdAL2xpYi9kYi1zZXJ2aWNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjaGF0SWQgPSBwYXJzZUludChwYXJhbXMuaWQpO1xuICAgIFxuICAgIGlmIChpc05hTihjaGF0SWQpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGNoYXQgSUQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0ID0gZ2V0Q2hhdFdpdGhNZXNzYWdlcyhjaGF0SWQpO1xuICAgIFxuICAgIGlmICghY2hhdCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ2hhdCBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oY2hhdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hhdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDaGF0V2l0aE1lc3NhZ2VzIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsImNoYXRJZCIsInBhcnNlSW50IiwiaWQiLCJpc05hTiIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNoYXQiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chats/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst dbPath = (0,path__WEBPACK_IMPORTED_MODULE_1__.join)(process.cwd(), \"promptlab.db\");\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath);\n// Enable foreign keys\ndb.pragma(\"foreign_keys = ON\");\n// Create tables\ndb.exec(`\n  CREATE TABLE IF NOT EXISTS folders (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name TEXT NOT NULL,\n    parent_id INTEGER REFERENCES folders(id) ON DELETE CASCADE,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  );\n\n  CREATE TABLE IF NOT EXISTS chats (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    title TEXT NOT NULL,\n    folder_id INTEGER REFERENCES folders(id) ON DELETE SET NULL,\n    rating INTEGER CHECK (rating >= 1 AND rating <= 10),\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  );\n\n  CREATE TABLE IF NOT EXISTS messages (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    chat_id INTEGER NOT NULL REFERENCES chats(id) ON DELETE CASCADE,\n    role TEXT NOT NULL CHECK (role IN ('user', 'assistant')),\n    content TEXT NOT NULL,\n    model_id TEXT,\n    model_name TEXT,\n    temperature REAL,\n    max_tokens INTEGER,\n    response_time_ms INTEGER,\n    tokens_used INTEGER,\n    estimated_cost REAL,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  );\n\n  CREATE TABLE IF NOT EXISTS llm_models (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    provider TEXT NOT NULL,\n    context_length INTEGER,\n    pricing_input REAL,\n    pricing_output REAL,\n    is_available BOOLEAN DEFAULT 1,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  );\n`);\n// Create indexes for better performance\ndb.exec(`\n  CREATE INDEX IF NOT EXISTS idx_chats_folder_id ON chats(folder_id);\n  CREATE INDEX IF NOT EXISTS idx_chats_created_at ON chats(created_at DESC);\n  CREATE INDEX IF NOT EXISTS idx_messages_chat_id ON messages(chat_id);\n  CREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages(created_at);\n`);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0YWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0M7QUFDVjtBQUU1QixNQUFNRSxTQUFTRCwwQ0FBSUEsQ0FBQ0UsUUFBUUMsR0FBRyxJQUFJO0FBQ25DLE1BQU1DLEtBQUssSUFBSUwsdURBQVFBLENBQUNFO0FBRXhCLHNCQUFzQjtBQUN0QkcsR0FBR0MsTUFBTSxDQUFDO0FBRVYsZ0JBQWdCO0FBQ2hCRCxHQUFHRSxJQUFJLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0Q1QsQ0FBQztBQUVELHdDQUF3QztBQUN4Q0YsR0FBR0UsSUFBSSxDQUFDLENBQUM7Ozs7O0FBS1QsQ0FBQztBQUVELGlFQUFlRixFQUFFQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvbXB0bGFiLy4vbGliL2RhdGFiYXNlLnRzPzRkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERhdGFiYXNlIGZyb20gJ2JldHRlci1zcWxpdGUzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuY29uc3QgZGJQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAncHJvbXB0bGFiLmRiJyk7XG5jb25zdCBkYiA9IG5ldyBEYXRhYmFzZShkYlBhdGgpO1xuXG4vLyBFbmFibGUgZm9yZWlnbiBrZXlzXG5kYi5wcmFnbWEoJ2ZvcmVpZ25fa2V5cyA9IE9OJyk7XG5cbi8vIENyZWF0ZSB0YWJsZXNcbmRiLmV4ZWMoYFxuICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBmb2xkZXJzIChcbiAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgbmFtZSBURVhUIE5PVCBOVUxMLFxuICAgIHBhcmVudF9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgZm9sZGVycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICApO1xuXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNoYXRzIChcbiAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcbiAgICBmb2xkZXJfaWQgSU5URUdFUiBSRUZFUkVOQ0VTIGZvbGRlcnMoaWQpIE9OIERFTEVURSBTRVQgTlVMTCxcbiAgICByYXRpbmcgSU5URUdFUiBDSEVDSyAocmF0aW5nID49IDEgQU5EIHJhdGluZyA8PSAxMCksXG4gICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICApO1xuXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1lc3NhZ2VzIChcbiAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgY2hhdF9pZCBJTlRFR0VSIE5PVCBOVUxMIFJFRkVSRU5DRVMgY2hhdHMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgIHJvbGUgVEVYVCBOT1QgTlVMTCBDSEVDSyAocm9sZSBJTiAoJ3VzZXInLCAnYXNzaXN0YW50JykpLFxuICAgIGNvbnRlbnQgVEVYVCBOT1QgTlVMTCxcbiAgICBtb2RlbF9pZCBURVhULFxuICAgIG1vZGVsX25hbWUgVEVYVCxcbiAgICB0ZW1wZXJhdHVyZSBSRUFMLFxuICAgIG1heF90b2tlbnMgSU5URUdFUixcbiAgICByZXNwb25zZV90aW1lX21zIElOVEVHRVIsXG4gICAgdG9rZW5zX3VzZWQgSU5URUdFUixcbiAgICBlc3RpbWF0ZWRfY29zdCBSRUFMLFxuICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICApO1xuXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGxsbV9tb2RlbHMgKFxuICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgbmFtZSBURVhUIE5PVCBOVUxMLFxuICAgIHByb3ZpZGVyIFRFWFQgTk9UIE5VTEwsXG4gICAgY29udGV4dF9sZW5ndGggSU5URUdFUixcbiAgICBwcmljaW5nX2lucHV0IFJFQUwsXG4gICAgcHJpY2luZ19vdXRwdXQgUkVBTCxcbiAgICBpc19hdmFpbGFibGUgQk9PTEVBTiBERUZBVUxUIDEsXG4gICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICApO1xuYCk7XG5cbi8vIENyZWF0ZSBpbmRleGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmRiLmV4ZWMoYFxuICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfY2hhdHNfZm9sZGVyX2lkIE9OIGNoYXRzKGZvbGRlcl9pZCk7XG4gIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9jaGF0c19jcmVhdGVkX2F0IE9OIGNoYXRzKGNyZWF0ZWRfYXQgREVTQyk7XG4gIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9tZXNzYWdlc19jaGF0X2lkIE9OIG1lc3NhZ2VzKGNoYXRfaWQpO1xuICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfbWVzc2FnZXNfY3JlYXRlZF9hdCBPTiBtZXNzYWdlcyhjcmVhdGVkX2F0KTtcbmApO1xuXG5leHBvcnQgZGVmYXVsdCBkYjtcbiJdLCJuYW1lcyI6WyJEYXRhYmFzZSIsImpvaW4iLCJkYlBhdGgiLCJwcm9jZXNzIiwiY3dkIiwiZGIiLCJwcmFnbWEiLCJleGVjIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db-service.ts":
/*!***************************!*\
  !*** ./lib/db-service.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createChat: () => (/* binding */ createChat),\n/* harmony export */   createFolder: () => (/* binding */ createFolder),\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   getChatWithMessages: () => (/* binding */ getChatWithMessages),\n/* harmony export */   getChats: () => (/* binding */ getChats),\n/* harmony export */   getFolders: () => (/* binding */ getFolders),\n/* harmony export */   getLLMModel: () => (/* binding */ getLLMModel),\n/* harmony export */   getLLMModels: () => (/* binding */ getLLMModels),\n/* harmony export */   saveLLMModel: () => (/* binding */ saveLLMModel),\n/* harmony export */   updateChatRating: () => (/* binding */ updateChatRating),\n/* harmony export */   updateChatTitle: () => (/* binding */ updateChatTitle)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database */ \"(rsc)/./lib/database.ts\");\n\n// Folder operations\nfunction createFolder(name, parentId = null) {\n    const stmt = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    INSERT INTO folders (name, parent_id) \n    VALUES (?, ?)\n  `);\n    const result = stmt.run(name, parentId);\n    return {\n        id: result.lastInsertRowid,\n        name,\n        parent_id: parentId,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    };\n}\nfunction getFolders() {\n    const folders = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM folders \n    ORDER BY name\n  `).all();\n    const chats = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM chats \n    ORDER BY created_at DESC\n  `).all();\n    // Build folder hierarchy\n    const folderMap = new Map();\n    const rootFolders = [];\n    // Initialize all folders\n    folders.forEach((folder)=>{\n        folderMap.set(folder.id, {\n            ...folder,\n            children: [],\n            chats: []\n        });\n    });\n    // Build hierarchy\n    folders.forEach((folder)=>{\n        const folderWithChildren = folderMap.get(folder.id);\n        if (folder.parent_id === null) {\n            rootFolders.push(folderWithChildren);\n        } else {\n            const parent = folderMap.get(folder.parent_id);\n            if (parent) {\n                parent.children.push(folderWithChildren);\n            }\n        }\n    });\n    // Add chats to folders\n    chats.forEach((chat)=>{\n        if (chat.folder_id) {\n            const folder = folderMap.get(chat.folder_id);\n            if (folder) {\n                folder.chats.push(chat);\n            }\n        }\n    });\n    return rootFolders;\n}\n// Chat operations\nfunction createChat(title, folderId = null) {\n    const stmt = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    INSERT INTO chats (title, folder_id) \n    VALUES (?, ?)\n  `);\n    const result = stmt.run(title, folderId);\n    return {\n        id: result.lastInsertRowid,\n        title,\n        folder_id: folderId,\n        rating: null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    };\n}\nfunction getChats(folderId) {\n    if (folderId) {\n        return _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n      SELECT * FROM chats \n      WHERE folder_id = ? \n      ORDER BY created_at DESC\n    `).all(folderId);\n    }\n    return _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM chats \n    ORDER BY created_at DESC\n  `).all();\n}\nfunction getChatWithMessages(chatId) {\n    const chat = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM chats WHERE id = ?\n  `).get(chatId);\n    if (!chat) return null;\n    const messages = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM messages \n    WHERE chat_id = ? \n    ORDER BY created_at ASC\n  `).all(chatId);\n    return {\n        ...chat,\n        messages\n    };\n}\nfunction updateChatRating(chatId, rating) {\n    _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    UPDATE chats \n    SET rating = ?, updated_at = CURRENT_TIMESTAMP \n    WHERE id = ?\n  `).run(rating, chatId);\n}\nfunction updateChatTitle(chatId, title) {\n    _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    UPDATE chats \n    SET title = ?, updated_at = CURRENT_TIMESTAMP \n    WHERE id = ?\n  `).run(title, chatId);\n}\n// Message operations\nfunction createMessage(message) {\n    const stmt = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    INSERT INTO messages (\n      chat_id, role, content, model_id, model_name, \n      temperature, max_tokens, response_time_ms, \n      tokens_used, estimated_cost\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n  `);\n    const result = stmt.run(message.chat_id, message.role, message.content, message.model_id, message.model_name, message.temperature, message.max_tokens, message.response_time_ms, message.tokens_used, message.estimated_cost);\n    return {\n        id: result.lastInsertRowid,\n        ...message,\n        created_at: new Date().toISOString()\n    };\n}\n// LLM Model operations\nfunction saveLLMModel(model) {\n    const stmt = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    INSERT OR REPLACE INTO llm_models (\n      id, name, provider, context_length, \n      pricing_input, pricing_output, is_available, updated_at\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n  `);\n    stmt.run(model.id, model.name, model.provider, model.context_length, model.pricing_input, model.pricing_output, model.is_available ? 1 : 0, new Date().toISOString());\n}\nfunction getLLMModels() {\n    return _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM llm_models \n    WHERE is_available = 1 \n    ORDER BY name\n  `).all();\n}\nfunction getLLMModel(modelId) {\n    return _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prepare(`\n    SELECT * FROM llm_models WHERE id = ?\n  `).get(modelId) || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUUsY0FBYyxFQUNwQkYsTUFBTUcsYUFBYSxFQUNuQkgsTUFBTUksY0FBYyxFQUNwQkosTUFBTUssWUFBWSxHQUFHLElBQUksR0FDekIsSUFBSWhELE9BQU9DLFdBQVc7QUFFMUI7QUFFTyxTQUFTZ0Q7SUFDZCxPQUFPN0QsaURBQUVBLENBQUNLLE9BQU8sQ0FBQyxDQUFDOzs7O0VBSW5CLENBQUMsRUFBRVksR0FBRztBQUNSO0FBRU8sU0FBUzZDLFlBQVlDLE9BQWU7SUFDekMsT0FBTy9ELGlEQUFFQSxDQUFDSyxPQUFPLENBQUMsQ0FBQzs7RUFFbkIsQ0FBQyxFQUFFc0IsR0FBRyxDQUFDb0MsWUFBb0M7QUFDN0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9tcHRsYWIvLi9saWIvZGItc2VydmljZS50cz8zZTM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYiBmcm9tICcuL2RhdGFiYXNlJztcbmltcG9ydCB7IENoYXQsIE1lc3NhZ2UsIEZvbGRlciwgTExNTW9kZWwsIENoYXRXaXRoTWVzc2FnZXMsIEZvbGRlcldpdGhDaGlsZHJlbiB9IGZyb20gJy4vdHlwZXMnO1xuXG4vLyBGb2xkZXIgb3BlcmF0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihuYW1lOiBzdHJpbmcsIHBhcmVudElkOiBudW1iZXIgfCBudWxsID0gbnVsbCk6IEZvbGRlciB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBJTlNFUlQgSU5UTyBmb2xkZXJzIChuYW1lLCBwYXJlbnRfaWQpIFxuICAgIFZBTFVFUyAoPywgPylcbiAgYCk7XG4gIFxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihuYW1lLCBwYXJlbnRJZCk7XG4gIFxuICByZXR1cm4ge1xuICAgIGlkOiByZXN1bHQubGFzdEluc2VydFJvd2lkIGFzIG51bWJlcixcbiAgICBuYW1lLFxuICAgIHBhcmVudF9pZDogcGFyZW50SWQsXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRlcnMoKTogRm9sZGVyV2l0aENoaWxkcmVuW10ge1xuICBjb25zdCBmb2xkZXJzID0gZGIucHJlcGFyZShgXG4gICAgU0VMRUNUICogRlJPTSBmb2xkZXJzIFxuICAgIE9SREVSIEJZIG5hbWVcbiAgYCkuYWxsKCkgYXMgRm9sZGVyW107XG5cbiAgY29uc3QgY2hhdHMgPSBkYi5wcmVwYXJlKGBcbiAgICBTRUxFQ1QgKiBGUk9NIGNoYXRzIFxuICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICBgKS5hbGwoKSBhcyBDaGF0W107XG5cbiAgLy8gQnVpbGQgZm9sZGVyIGhpZXJhcmNoeVxuICBjb25zdCBmb2xkZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgRm9sZGVyV2l0aENoaWxkcmVuPigpO1xuICBjb25zdCByb290Rm9sZGVyczogRm9sZGVyV2l0aENoaWxkcmVuW10gPSBbXTtcblxuICAvLyBJbml0aWFsaXplIGFsbCBmb2xkZXJzXG4gIGZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xuICAgIGZvbGRlck1hcC5zZXQoZm9sZGVyLmlkLCB7XG4gICAgICAuLi5mb2xkZXIsXG4gICAgICBjaGlsZHJlbjogW10sXG4gICAgICBjaGF0czogW10sXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEJ1aWxkIGhpZXJhcmNoeVxuICBmb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IHtcbiAgICBjb25zdCBmb2xkZXJXaXRoQ2hpbGRyZW4gPSBmb2xkZXJNYXAuZ2V0KGZvbGRlci5pZCkhO1xuICAgIGlmIChmb2xkZXIucGFyZW50X2lkID09PSBudWxsKSB7XG4gICAgICByb290Rm9sZGVycy5wdXNoKGZvbGRlcldpdGhDaGlsZHJlbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGZvbGRlck1hcC5nZXQoZm9sZGVyLnBhcmVudF9pZCk7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGZvbGRlcldpdGhDaGlsZHJlbik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBBZGQgY2hhdHMgdG8gZm9sZGVyc1xuICBjaGF0cy5mb3JFYWNoKGNoYXQgPT4ge1xuICAgIGlmIChjaGF0LmZvbGRlcl9pZCkge1xuICAgICAgY29uc3QgZm9sZGVyID0gZm9sZGVyTWFwLmdldChjaGF0LmZvbGRlcl9pZCk7XG4gICAgICBpZiAoZm9sZGVyKSB7XG4gICAgICAgIGZvbGRlci5jaGF0cy5wdXNoKGNoYXQpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJvb3RGb2xkZXJzO1xufVxuXG4vLyBDaGF0IG9wZXJhdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGF0KHRpdGxlOiBzdHJpbmcsIGZvbGRlcklkOiBudW1iZXIgfCBudWxsID0gbnVsbCk6IENoYXQge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgSU5TRVJUIElOVE8gY2hhdHMgKHRpdGxlLCBmb2xkZXJfaWQpIFxuICAgIFZBTFVFUyAoPywgPylcbiAgYCk7XG4gIFxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bih0aXRsZSwgZm9sZGVySWQpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBpZDogcmVzdWx0Lmxhc3RJbnNlcnRSb3dpZCBhcyBudW1iZXIsXG4gICAgdGl0bGUsXG4gICAgZm9sZGVyX2lkOiBmb2xkZXJJZCxcbiAgICByYXRpbmc6IG51bGwsXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoYXRzKGZvbGRlcklkPzogbnVtYmVyKTogQ2hhdFtdIHtcbiAgaWYgKGZvbGRlcklkKSB7XG4gICAgcmV0dXJuIGRiLnByZXBhcmUoYFxuICAgICAgU0VMRUNUICogRlJPTSBjaGF0cyBcbiAgICAgIFdIRVJFIGZvbGRlcl9pZCA9ID8gXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcbiAgICBgKS5hbGwoZm9sZGVySWQpIGFzIENoYXRbXTtcbiAgfVxuICBcbiAgcmV0dXJuIGRiLnByZXBhcmUoYFxuICAgIFNFTEVDVCAqIEZST00gY2hhdHMgXG4gICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gIGApLmFsbCgpIGFzIENoYXRbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoYXRXaXRoTWVzc2FnZXMoY2hhdElkOiBudW1iZXIpOiBDaGF0V2l0aE1lc3NhZ2VzIHwgbnVsbCB7XG4gIGNvbnN0IGNoYXQgPSBkYi5wcmVwYXJlKGBcbiAgICBTRUxFQ1QgKiBGUk9NIGNoYXRzIFdIRVJFIGlkID0gP1xuICBgKS5nZXQoY2hhdElkKSBhcyBDaGF0IHwgdW5kZWZpbmVkO1xuXG4gIGlmICghY2hhdCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgbWVzc2FnZXMgPSBkYi5wcmVwYXJlKGBcbiAgICBTRUxFQ1QgKiBGUk9NIG1lc3NhZ2VzIFxuICAgIFdIRVJFIGNoYXRfaWQgPSA/IFxuICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgQVNDXG4gIGApLmFsbChjaGF0SWQpIGFzIE1lc3NhZ2VbXTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNoYXQsXG4gICAgbWVzc2FnZXMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDaGF0UmF0aW5nKGNoYXRJZDogbnVtYmVyLCByYXRpbmc6IG51bWJlcik6IHZvaWQge1xuICBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgY2hhdHMgXG4gICAgU0VUIHJhdGluZyA9ID8sIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBcbiAgICBXSEVSRSBpZCA9ID9cbiAgYCkucnVuKHJhdGluZywgY2hhdElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNoYXRUaXRsZShjaGF0SWQ6IG51bWJlciwgdGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgY2hhdHMgXG4gICAgU0VUIHRpdGxlID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QIFxuICAgIFdIRVJFIGlkID0gP1xuICBgKS5ydW4odGl0bGUsIGNoYXRJZCk7XG59XG5cbi8vIE1lc3NhZ2Ugb3BlcmF0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZTogT21pdDxNZXNzYWdlLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPik6IE1lc3NhZ2Uge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgSU5TRVJUIElOVE8gbWVzc2FnZXMgKFxuICAgICAgY2hhdF9pZCwgcm9sZSwgY29udGVudCwgbW9kZWxfaWQsIG1vZGVsX25hbWUsIFxuICAgICAgdGVtcGVyYXR1cmUsIG1heF90b2tlbnMsIHJlc3BvbnNlX3RpbWVfbXMsIFxuICAgICAgdG9rZW5zX3VzZWQsIGVzdGltYXRlZF9jb3N0XG4gICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXG4gIGApO1xuICBcbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4oXG4gICAgbWVzc2FnZS5jaGF0X2lkLFxuICAgIG1lc3NhZ2Uucm9sZSxcbiAgICBtZXNzYWdlLmNvbnRlbnQsXG4gICAgbWVzc2FnZS5tb2RlbF9pZCxcbiAgICBtZXNzYWdlLm1vZGVsX25hbWUsXG4gICAgbWVzc2FnZS50ZW1wZXJhdHVyZSxcbiAgICBtZXNzYWdlLm1heF90b2tlbnMsXG4gICAgbWVzc2FnZS5yZXNwb25zZV90aW1lX21zLFxuICAgIG1lc3NhZ2UudG9rZW5zX3VzZWQsXG4gICAgbWVzc2FnZS5lc3RpbWF0ZWRfY29zdFxuICApO1xuICBcbiAgcmV0dXJuIHtcbiAgICBpZDogcmVzdWx0Lmxhc3RJbnNlcnRSb3dpZCBhcyBudW1iZXIsXG4gICAgLi4ubWVzc2FnZSxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG59XG5cbi8vIExMTSBNb2RlbCBvcGVyYXRpb25zXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUxMTU1vZGVsKG1vZGVsOiBMTE1Nb2RlbCk6IHZvaWQge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBsbG1fbW9kZWxzIChcbiAgICAgIGlkLCBuYW1lLCBwcm92aWRlciwgY29udGV4dF9sZW5ndGgsIFxuICAgICAgcHJpY2luZ19pbnB1dCwgcHJpY2luZ19vdXRwdXQsIGlzX2F2YWlsYWJsZSwgdXBkYXRlZF9hdFxuICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICBgKTtcbiAgXG4gIHN0bXQucnVuKFxuICAgIG1vZGVsLmlkLFxuICAgIG1vZGVsLm5hbWUsXG4gICAgbW9kZWwucHJvdmlkZXIsXG4gICAgbW9kZWwuY29udGV4dF9sZW5ndGgsXG4gICAgbW9kZWwucHJpY2luZ19pbnB1dCxcbiAgICBtb2RlbC5wcmljaW5nX291dHB1dCxcbiAgICBtb2RlbC5pc19hdmFpbGFibGUgPyAxIDogMCxcbiAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExMTU1vZGVscygpOiBMTE1Nb2RlbFtdIHtcbiAgcmV0dXJuIGRiLnByZXBhcmUoYFxuICAgIFNFTEVDVCAqIEZST00gbGxtX21vZGVscyBcbiAgICBXSEVSRSBpc19hdmFpbGFibGUgPSAxIFxuICAgIE9SREVSIEJZIG5hbWVcbiAgYCkuYWxsKCkgYXMgTExNTW9kZWxbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExMTU1vZGVsKG1vZGVsSWQ6IHN0cmluZyk6IExMTU1vZGVsIHwgbnVsbCB7XG4gIHJldHVybiBkYi5wcmVwYXJlKGBcbiAgICBTRUxFQ1QgKiBGUk9NIGxsbV9tb2RlbHMgV0hFUkUgaWQgPSA/XG4gIGApLmdldChtb2RlbElkKSBhcyBMTE1Nb2RlbCB8IHVuZGVmaW5lZCB8fCBudWxsO1xufVxuIl0sIm5hbWVzIjpbImRiIiwiY3JlYXRlRm9sZGVyIiwibmFtZSIsInBhcmVudElkIiwic3RtdCIsInByZXBhcmUiLCJyZXN1bHQiLCJydW4iLCJpZCIsImxhc3RJbnNlcnRSb3dpZCIsInBhcmVudF9pZCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiZ2V0Rm9sZGVycyIsImZvbGRlcnMiLCJhbGwiLCJjaGF0cyIsImZvbGRlck1hcCIsIk1hcCIsInJvb3RGb2xkZXJzIiwiZm9yRWFjaCIsImZvbGRlciIsInNldCIsImNoaWxkcmVuIiwiZm9sZGVyV2l0aENoaWxkcmVuIiwiZ2V0IiwicHVzaCIsInBhcmVudCIsImNoYXQiLCJmb2xkZXJfaWQiLCJjcmVhdGVDaGF0IiwidGl0bGUiLCJmb2xkZXJJZCIsInJhdGluZyIsImdldENoYXRzIiwiZ2V0Q2hhdFdpdGhNZXNzYWdlcyIsImNoYXRJZCIsIm1lc3NhZ2VzIiwidXBkYXRlQ2hhdFJhdGluZyIsInVwZGF0ZUNoYXRUaXRsZSIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwiY2hhdF9pZCIsInJvbGUiLCJjb250ZW50IiwibW9kZWxfaWQiLCJtb2RlbF9uYW1lIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwicmVzcG9uc2VfdGltZV9tcyIsInRva2Vuc191c2VkIiwiZXN0aW1hdGVkX2Nvc3QiLCJzYXZlTExNTW9kZWwiLCJtb2RlbCIsInByb3ZpZGVyIiwiY29udGV4dF9sZW5ndGgiLCJwcmljaW5nX2lucHV0IiwicHJpY2luZ19vdXRwdXQiLCJpc19hdmFpbGFibGUiLCJnZXRMTE1Nb2RlbHMiLCJnZXRMTE1Nb2RlbCIsIm1vZGVsSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db-service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchats%2F%5Bid%5D%2Froute&page=%2Fapi%2Fchats%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchats%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftaimur%2Fworkspace%2Fpromptlab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();